# Tests Creator Toolkit Extension

Эта директория содержит заготовку Chromium-расширения, которое разворачивает функционал конструктора тестов прямо в интерфейсе LMS. Основной интерфейс переносит веб-версию приложения в веб-доступный ресурс `panel.html`, а контент-скрипт `src/content-script.js` встраивает iframe с этим интерфейсом в каждый узел, у которого присутствует атрибут `data-tests-creator-embed`.

## Сценарий работы

1. Контент-скрипт ищет в DOM элементы с атрибутом `data-tests-creator-embed`.
2. Для каждого найденного элемента создаётся iframe с `panel.html`.
3. `panel.html` загружает `src/app.js`, который воспроизводит ключевой функционал конструктора тестов.

Такой подход позволяет встроить интерфейс в произвольный раздел LMS и при необходимости дополнить его логикой, привязанной к конкретным селекторам страницы.

## Заглушка для финального результата

В веб-версии проект формировал zip-архив с тестами. Для расширения конечный формат будет другим, поэтому в функции подготовки результата оставлена заглушка:

```js
window.prepareExtensionArtifact(context);
```

Если эта функция не определена, интерфейс сообщает об отсутствии реализации. Когда формат будет согласован, добавьте реализацию функции в отдельный модуль и подключите его перед `src/app.js` либо присвойте обработчик в глобальной области `panel.html`.

> **TODO:** реализовать `window.prepareExtensionArtifact(context)` — вернуть итоговый артефакт и/или сообщение об успешной подготовке.

## Как запускать в разработке

1. Соберите проект (архивировать директорию не требуется).
2. Откройте страницу `chrome://extensions` в Chromium-браузере.
3. Включите «Режим разработчика» и нажмите «Загрузить распакованное расширение».
4. Укажите директорию `EXTENTION` из этого репозитория.
5. Для встраивания интерфейса добавьте в страницу элемент с атрибутом `data-tests-creator-embed`, например:

   ```html
   <div data-tests-creator-embed></div>
   ```

6. Перезагрузите страницу — в контейнере появится интерфейс конструктора тестов.

## Примечания для внедрения

- Хранилище состояния использует `localStorage` внутри iframe, поэтому данные сохраняются в контексте страницы, где открыт интерфейс.
- Стили загружаются локально, но при желании их можно сузить или заменить на отдельную тему.
- Для интеграции в другие системы можно расширить контент-скрипт, чтобы он реагировал на дополнительные селекторы или сообщения от фоновой части расширения.

## Важно для ИИ-агентов

Если инструкция не требует явно работать с директорием `EXTENTION` или Chromium-расширением, **игнорируйте эту директорию**. Изменения в расширении следует вносить только по прямому запросу.
